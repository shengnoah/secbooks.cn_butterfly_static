{"title":"Hexo使用Gitee+PicGO图墙图片不显示","uid":"70ccad85c177ffedfa95e18f77517e68","slug":"kanbanfiles/Hexo使用Gitee+PicGO图墙图片不显示","date":"2024-03-16T11:44:51.796Z","updated":"2024-03-16T11:44:51.796Z","comments":true,"path":"api/articles/kanbanfiles/Hexo使用Gitee+PicGO图墙图片不显示.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":[],"content":"<p><img src=\"https://gitee.com/shengnoah/picture/raw/master/20231027163025.png\" alt=\"image.png\" /></p>\n<p>如何只对网页中的img标签进行no-referrer限制。</p>\n<p>要对网页中的img标签进行no-referrer限制，您可以使用以下方法：</p>\n<ol>\n<li class=\"lvl-3\">\n<p>使用JavaScript：在网页中插入以下JavaScript代码，它将遍历所有的img标签，并为每个img标签设置rel属性为&quot;noreferrer&quot;。</p>\n</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;DOMContentLoaded&#x27;</span>, <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> imgTags = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&#x27;img&#x27;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; imgTags.<span class=\"property\">length</span>; i++) &#123;</span><br><span class=\"line\">    imgTags[i].<span class=\"title function_\">setAttribute</span>(<span class=\"string\">&#x27;referrerpolicy&#x27;</span>, <span class=\"string\">&#x27;no-referrer&#x27;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li class=\"lvl-3\">\n<p>使用CSS：在网页的样式表（CSS）中添加以下代码，它将为所有的img标签设置rel属性为&quot;noreferrer&quot;。</p>\n</li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">img</span> &#123;</span><br><span class=\"line\">  referrerpolicy: no-referrer;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>请注意，这些方法都是在客户端（浏览器）执行的，并且只会影响到加载了该代码或样式表的网页。如果您想全局应用no-referrer限制，您可能需要在服务器端配置相关设置。</p>\n<p>直接在头文件中禁用，是可以跃过图片防盗链，但同时百度统计也屏蔽了， 图是可以显示了， 但是百度统计不过了。<br />\n<meta name=\"referrer\" content=\"no-referrer\"/></p>\n<p>用JS动态进行no-referrer设置。</p>\n<!-- 百度统计 -->\n<script src=\"https://hm.baidu.com/hm.js?c7002d193ba43df9317b7fc847709213\"></script>\n<!-- no-referrer -->\n<script>\n(function () {\n  // 添加 no-referrer\n  // <meta name=\"referrer\" content=\"no-referrer\" />\n  var meta = document.createElement('meta')\n  meta.content = 'no-referrer'\n  meta.name = 'referrer'\n  document.getElementsByTagName('head')[0].appendChild(meta)\n})()\n</script>\n<p>要在百度的统计JS加载之后，加载上面的代码，这样百度就可以正常统计了， 这段代码要放到Hexo的主题文件里， 标签不能用普通的JS标签，要用Hexo主题用的标签。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> theme.<span class=\"property\">baidu_analytics</span></span><br><span class=\"line\">  script.</span><br><span class=\"line\">    (<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> meta = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&#x27;meta&#x27;</span>)</span><br><span class=\"line\">    meta.<span class=\"property\">content</span> = <span class=\"string\">&#x27;no-referrer&#x27;</span></span><br><span class=\"line\">    meta.<span class=\"property\">name</span> = <span class=\"string\">&#x27;referrer&#x27;</span></span><br><span class=\"line\">    <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&#x27;head&#x27;</span>)[<span class=\"number\">0</span>].<span class=\"title function_\">appendChild</span>(meta)</span><br><span class=\"line\">    &#125;)()</span><br></pre></td></tr></table></figure>\n<p>这段代码放在主题的百度代码统计之后， 图墙的图片就可以显示了， 并且百度的统计也是正常。</p>\n<p>html的img标签显示图片的例子</p>\n<img src=\"example.jpg\" alt=\"Example Image\">\n<p><img src=\"https://gitee.com/shengnoah/picture/raw/master/20231027182204.png\" alt=\"image.png\" /></p>\n","text":" 如何只对网页中的img标签进行no-referrer限制。 要对网页中的img标签进行no-referrer限制，您可以使用以下方法： 使用JavaScript：在网页中插入以下JavaScript代码，它将遍历所有的img标签，并为每个img标签设置rel属性为\"norefe...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"obsidian","slug":"obsidian","count":8,"path":"api/categories/obsidian.json"},{"name":"hexo","slug":"obsidian/hexo","count":3,"path":"api/categories/obsidian/hexo.json"}],"tags":[{"name":"obsidian","slug":"obsidian","count":3,"path":"api/tags/obsidian.json"},{"name":"hexo","slug":"hexo","count":1,"path":"api/tags/hexo.json"},{"name":"picgo","slug":"picgo","count":1,"path":"api/tags/picgo.json"}],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"kanbanfiles/Hexo的优秀主题","date":"2024-03-16T11:44:51.796Z","updated":"2024-03-16T11:44:51.796Z","comments":true,"path":"api/articles/kanbanfiles/Hexo的优秀主题.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"有那些优秀的Hexo主题可以选择使用 以下是一些优秀的Hexo主题供选择使用： Next：Next是一款功能强大且高度可定制的Hexo主题，具有响应式布局和多种颜色方案。它支持多种插件和功能，如代码高亮、搜索、多语言支持等。 Landscape：Landscape是Hexo自带的...","link":"","photos":[],"count_time":{"symbolsCount":501,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"kanbanfiles/Kali上的弱口令扫描工具","date":"2024-03-16T11:44:51.796Z","updated":"2024-03-16T11:44:51.796Z","comments":true,"path":"api/articles/kanbanfiles/Kali上的弱口令扫描工具.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"Kali上的弱口令扫描工具有那些可以使用？ 在Kali上有很多弱口令扫描工具可以使用，以下是一些常见的工具： Hydra：Hydra是一个强大的登录破解工具，支持多种协议和服务，可以用于进行弱口令扫描。 Medusa：Medusa也是一个密码破解工具，类似于Hydra，支持多种协...","link":"","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}