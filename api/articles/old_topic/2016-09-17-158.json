{"title":"Lua动态加载脚本( loadstring )","uid":"9eeeb777591d00c19e4d4fed3011ba33","slug":"old_topic/2016-09-17-158","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-16T11:44:51.844Z","comments":true,"path":"api/articles/old_topic/2016-09-17-158.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"content":"<p>作者：糖果</p>\n<p>下面是代码：</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">local</span> lua_script = <span class=\"string\">[[</span></span><br><span class=\"line\"><span class=\"string\">     local var = 1</span></span><br><span class=\"line\"><span class=\"string\">     print(var)</span></span><br><span class=\"line\"><span class=\"string\">]]</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span>  script = lua_script </span><br><span class=\"line\"><span class=\"keyword\">local</span> tb=<span class=\"built_in\">assert</span>(<span class=\"built_in\">loadstring</span>(script))()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(tb[<span class=\"number\">0</span>].text)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">char</span>* testfunc = <span class=\"string\">&quot;print (add(1.0, 2.0)) print(sub(20.1, 19))&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        lua_State* L = luaL_newstate();</span><br><span class=\"line\">        luaL_openlibs(L);</span><br><span class=\"line\">        lua_register(L, <span class=\"string\">&quot;add&quot;</span>, add);</span><br><span class=\"line\">        lua_register(L, <span class=\"string\">&quot;sub&quot;</span>, sub);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (luaL_dostring(L, testfunc))</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Failed to invoke.\\n&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        lua_close(L);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>糖果实验室<br />\nwww.lua.ren/topic/158</p>\n","text":"作者：糖果 下面是代码： 123456789local lua_script = [[ local var = 1 print(var)]]local script = lua_script local tb=assert(loadstring(script))()print(t...","link":"","photos":[],"count_time":{"symbolsCount":599,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Lua Curl的一般应用","uid":"85399f84f55b8c1291e5685cda57f473","slug":"old_topic/2016-09-17-154","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-16T11:44:51.843Z","comments":true,"path":"api/articles/old_topic/2016-09-17-154.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"作者：糖果 Curl是一个WEB开发常用的工具，直接用官网的翻译 curl是一个开源的命令行工具，也是一个库，用于传输URL语法的工具，支持DICT, FILE, FTP, FTPS, Gopher, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, ...","link":"","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"LUA书","uid":"a4dc51fe6b804bd703cc11ff53f294af","slug":"old_topic/2016-09-17-157","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-16T11:44:51.844Z","comments":true,"path":"api/articles/old_topic/2016-09-17-157.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"var jd_union_pid=\"936552349\";var jd_union_euid=\"\"; var jd_union_pid=\"936550394\";var jd_union_euid=\"\"; var jd_union_pid=\"936535377\";var jd_un...","link":"","photos":[],"count_time":{"symbolsCount":893,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}