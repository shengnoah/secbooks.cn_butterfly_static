{"title":"Lua动态加载脚本( loadstring )","uid":"9eeeb777591d00c19e4d4fed3011ba33","slug":"old_topic/2016-09-17-158","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-16T11:44:51.844Z","comments":true,"path":"api/articles/old_topic/2016-09-17-158.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"content":"<p>作者：糖果</p>\n<p>下面是代码：</p>\n<figure class=\"highlight lua\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">local</span> lua_script = <span class=\"string\">[[</span></span><br><span class=\"line\"><span class=\"string\">     local var = 1</span></span><br><span class=\"line\"><span class=\"string\">     print(var)</span></span><br><span class=\"line\"><span class=\"string\">]]</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">local</span>  script = lua_script </span><br><span class=\"line\"><span class=\"keyword\">local</span> tb=<span class=\"built_in\">assert</span>(<span class=\"built_in\">loadstring</span>(script))()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(tb[<span class=\"number\">0</span>].text)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">char</span>* testfunc = <span class=\"string\">&quot;print (add(1.0, 2.0)) print(sub(20.1, 19))&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">        lua_State* L = luaL_newstate();</span><br><span class=\"line\">        luaL_openlibs(L);</span><br><span class=\"line\">        lua_register(L, <span class=\"string\">&quot;add&quot;</span>, add);</span><br><span class=\"line\">        lua_register(L, <span class=\"string\">&quot;sub&quot;</span>, sub);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (luaL_dostring(L, testfunc))</span><br><span class=\"line\">                <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;Failed to invoke.\\n&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        lua_close(L);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>糖果实验室<br />\nwww.lua.ren/topic/158</p>\n","text":"作者：糖果 下面是代码： 123456789local lua_script = [[ local var = 1 print(var)]]local script = lua_script local tb=assert(loadstring(script))()print(t...","link":"","photos":[],"count_time":{"symbolsCount":599,"symbolsTime":"1 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"toc":"","author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"CSRF攻击预防的Token生成原理","uid":"2caace3339612aabd4a60ee7889dcc5d","slug":"old_topic/2016-09-17-155","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-16T11:44:51.843Z","comments":true,"path":"api/articles/old_topic/2016-09-17-155.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"作者：糖果 以往我们讲到CSRF，谈及都是CSRF的攻击原理，这次讲一下预防CSRF，生成Token背后的 加密原理和具体实现例示。 1.Token构成。 从需求功能上来讲，为了防止CSRF工具，token需要具有不重复，另外，还含有特定的功能 信息，比如过期时间戳。 下面的图描...","link":"","photos":[],"count_time":{"symbolsCount":"4.7k","symbolsTime":"4 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"LUA调用C语言实现的SO库","uid":"41a2ce410f87ba443188f31dccca5c41","slug":"old_topic/2016-09-17-156","date":"2016-09-17T14:50:18.000Z","updated":"2024-03-16T11:44:51.844Z","comments":true,"path":"api/articles/old_topic/2016-09-17-156.json","keywords":"AIGC,LLM,糖果AIGC实验室","cover":null,"text":"作者：糖果 这篇文章归纳lua5.1的C语言模库so的“标准”写法，代码都是编译通过的，可直接参考使用！ tangguo.h 123456789101112131415161718#ifndef __tangguo_h__#define __tangguo_h__#include...","link":"","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"topic","slug":"topic","count":308,"path":"api/categories/topic.json"}],"tags":[],"author":{"name":"安全书","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"《墨守之道-Web服务安全架构与实践》","socials":{"github":"https://github.com/shengnoah","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/u/3732639263","zhihu":"https://www.zhihu.com/people/openresty","csdn":"","juejin":"","customs":{}}}}}